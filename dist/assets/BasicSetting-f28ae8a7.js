import{c as S,r as n,j as t,l as i}from"./index-3d8791b8.js";import"./httpClient-96fbf256.js";import{P as b}from"./PageBreadcrumb-9dd34a07.js";import"./Table-e312cd55.js";import{S as c}from"./sweetalert2.esm.all-dd0c4ce7.js";import{C as l}from"./Card-a8049602.js";import"./Row-10d1c5f5.js";import"./Col-c2024357.js";import"./index-2400ada3.js";import"./createWithBsPrefix-36be1bdf.js";const U=()=>{var p;const r="https://backendapi.chase.boundlesstechnologies.net",{user:m,isSuperUser:g,permissions:x}=S(),{token:o}=m,f=g||((p=x.Settings)==null?void 0:p.Update),[y,a]=n.useState(!0),[d,u]=n.useState(!1);n.useEffect(()=>{(async()=>{try{a(!0);const e=await fetch(`${r}/api/users/two-factor-auth`,{method:"GET",headers:{Authorization:`Bearer ${o}`}});if(!e.ok)throw new Error("Failed to fetch 2FA status.");const h=await e.json();u(h.twoFactorAuthEnabled)}catch(e){console.error("Error fetching OTP status:",e.message),c.fire({title:"Oops!",text:"Failed to load OTP status!",icon:"error",timer:1500})}finally{a(!1)}})()},[r,o]);const j=()=>{const s=!d;u(s),w(s)},w=async s=>{try{a(!0);const e=await fetch(`${r}/api/users/toggle-2fa`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`},body:JSON.stringify({enabled:s})});if(!e.ok){const O=(await e.json()).message||"An error occurred while updating OTP status.";throw new Error(O)}c.fire({title:"OTP Status Updated!",text:"OTP status has been updated successfully!",icon:"success",timer:1500})}catch(e){console.error("Error updating OTP status:",e.message),c.fire({title:"Oops!",text:"OTP status has not been updated successfully!",icon:"error",timer:1500})}finally{a(!1)}};return y?t.jsxs("div",{className:"d-flex justify-content-center align-items-center ",style:{height:"100vh"},children:[t.jsx(i,{animation:"grow",style:{margin:"0 5px"}}),t.jsx(i,{animation:"grow",style:{margin:"0 5px"}}),t.jsx(i,{animation:"grow",style:{margin:"0 5px"}})]}):t.jsxs(t.Fragment,{children:[t.jsx(b,{title:"Basic Settings",subName:"Settings"}),t.jsxs(l,{children:[t.jsxs(l.Header,{children:[t.jsx("h3",{children:"OTP Functionality"}),t.jsx("p",{children:"Two-Factor Authentication"})]}),t.jsx(l.Body,{children:t.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[t.jsx("div",{className:"toggle-container",style:{marginRight:"10px"},children:t.jsxs("label",{className:"toggle",children:[t.jsx("input",{type:"checkbox",id:"otp-toggle",checked:d,onChange:j,disabled:!f}),t.jsx("span",{className:"slider"}),t.jsx("span",{className:"text on",children:"ON"}),t.jsx("span",{className:"text off",children:"OFF"})]})}),t.jsx("div",{className:"info-text",children:t.jsx("p",{style:{margin:0},children:"Two-Factor Authentication (2FA) adds an extra layer of security to your customer login by requiring a one-time password."})})]})})]})]})};export{U as default};
